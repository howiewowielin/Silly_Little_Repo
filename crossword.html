<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>for you ðŸ’–</title>
<style>
:root{
  /* 15 columns: shrink cells on narrow screens so grid never cuts off */
  --cell: min(46px, calc((100vw - 40px) / 15));
  --bg:#0b0f10; --fg:#d9f2e6; --accent:#ff5ca2; --muted:#7aa48a;
}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--fg);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif
}
button, input{font-family:inherit}

.btn{
  appearance:none; border:1px solid rgba(255,92,162,.35);
  background:rgba(255,92,162,.10); color:var(--fg);
  padding:14px 20px; font-size:16px; border-radius:999px; cursor:pointer;
  transition:.2s transform,.2s opacity; backdrop-filter:blur(6px); touch-action:manipulation
}
.btn:hover{transform:translateY(-1px)}
.btn.primary{background:rgba(255,92,162,.18); font-weight:600}

.shell{min-height:100dvh; display:grid; place-items:center; padding:16px}
.card{
  width:min(960px,95vw);
  background:rgba(12,16,17,.82);
  border:1px solid rgba(255,92,162,.25); border-radius:18px;
  box-shadow:0 20px 80px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,92,162,.12);
  overflow:hidden
}
.bar{
  display:flex; align-items:center; gap:10px; padding:12px 14px;
  background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
  border-bottom:1px solid rgba(255,92,162,.18)
}
.title{margin-left:6px; font-size:12px; letter-spacing:.04em; color:var(--muted)}
.content{padding:14px}

/* Intro photo */
figure{margin:0}
#hero{
  display:block; width:100%;
  height:auto; max-height: min(42vh, 420px);
  object-fit:contain; background:#111;
}
#heroCaption{padding:12px 14px; font-size:18px; text-align:center}

/* Grid wrapper ensures no horizontal cut-off */
.gridWrap{
  overflow-x:auto; -webkit-overflow-scrolling:touch; padding-bottom:8px;
}
.grid{
  display:grid; grid-template-columns:repeat(15, var(--cell));
  grid-auto-rows:var(--cell); gap:2px; background:#0003; padding:6px;
  border-radius:12px; margin:auto; touch-action:manipulation
}
.cell{
  position:relative; width:var(--cell); height:var(--cell);
  background:#101618; border:1px solid #ffffff12; border-radius:6px;
  display:flex; align-items:center; justify-content:center
}
.block{background:#0a0f11; box-shadow:inset 0 0 0 1px #000}
.num{position:absolute; top:3px; left:6px; font-size:10px; color:#a7c4b4; user-select:none}
.cell input{
  width:100%; height:100%; background:transparent; border:0; outline:none; text-align:center;
  color:var(--fg); font-weight:700; font-size:18px; text-transform:uppercase;
  -webkit-appearance:none; caret-color:var(--accent);
}
.cell input:focus{box-shadow:inset 0 0 0 2px rgba(255,92,162,.35)}
.ok{box-shadow:inset 0 0 0 2px #2ecc71aa} .bad{box-shadow:inset 0 0 0 2px #ff5ca2aa}

/* Clues */
.clues{display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-top:14px;
  color:var(--muted); font-size:14px}
.clues h3{color:var(--fg); font-size:14px; margin:0 0 6px}
.clues ol{margin:0; padding-left:20px}
.footer{
  display:flex; flex-wrap:wrap; gap:10px; justify-content:space-between; align-items:center;
  padding:12px 16px 14px; font-size:12px; color:var(--muted); border-top:1px solid rgba(255,92,162,.14)
}
@media (max-width:520px){ .clues{grid-template-columns:1fr} }
</style>
</head>
<body>

<!-- INTRO WITH PHOTO -->
<div id="intro" class="shell">
  <div class="card">
    <div class="bar"><span class="title">// for you</span></div>
    <figure>
      <img id="hero" alt="us" src="her.png"/>
      <figcaption id="heroCaption">miss you baobei</figcaption>
      <!-- To change the caption, edit the text above OR:
           document.getElementById('heroCaption').textContent = 'YOUR CAPTION' -->
    </figure>
    <div class="content" style="display:flex;justify-content:center;border-top:1px solid rgba(255,92,162,.14)">
      <button class="btn primary" id="startGame" style="font-size:18px;padding:16px 26px">
        click to start the game
      </button>
    </div>
  </div>
</div>

<!-- CROSSWORD -->
<div id="game" class="shell" style="display:none">
  <div class="card">
    <div class="bar"><span class="title">// mini crossword â€” solve to unlock your surprise</span></div>
    <div class="content">
      <div class="gridWrap">
        <div id="grid" class="grid" aria-label="crossword grid"></div>
      </div>

      <div class="clues">
        <div><h3>Across</h3><ol id="acrossList"></ol></div>
        <div><h3>Down</h3><ol id="downList"></ol></div>
      </div>
    </div>
    <div class="footer">
      <span>fill the grid, then press check âœ…</span>
      <div style="display:flex;gap:10px">
        <button class="btn" id="check">check answers</button>
        <button class="btn" id="clear">clear</button>
      </div>
    </div>
  </div>
</div>

<script>
const BOUQUET_URL = "https://howiewowielin.github.io/Silly_Little_Repo/flowers_for_her";

const WORDS = [
  {dir:"across", answer:"MINTCHOCOLATE", row:0, col:0, clue:"whatâ€™s Adriâ€™s favourite ice cream flavour"},
  {dir:"across", answer:"NOV",           row:1, col:3, clue:"what month is my birthday"},
  {dir:"across", answer:"YOURASS",       row:2, col:1, clue:"what do I like smacking"},
  {dir:"across", answer:"UNIVERSAL",     row:3, col:1, clue:"where was our first date"},
  {dir:"across", answer:"RED",           row:4, col:3, clue:"whatâ€™s my favourite colour?"},
  {dir:"across", answer:"WILLIAM",       row:6, col:8, clue:"first name of my favourite DJ"},
  {dir:"down",   answer:"CORVETTE",      row:0, col:4, clue:"what is my dream car"},
  {dir:"down",   answer:"BMW",           row:4, col:6, clue:"what car do I drive"},
  {dir:"down",   answer:"SUSHI",         row:3, col:7, clue:"what is my favourite food"},
  {dir:"down",   answer:"BLUE",          row:2, col:9, clue:"Adriâ€™s favourite colour"},
];

const ROWS = 15, COLS = 15;
const gridEl = document.getElementById('grid');
const grid = Array.from({length:ROWS},()=>Array.from({length:COLS},()=>({block:true, num:null, sol:null})));

for(const w of WORDS){
  const A = w.answer.toUpperCase();
  for(let i=0;i<A.length;i++){
    const r = w.row + (w.dir==='down'? i : 0);
    const c = w.col + (w.dir==='across'? i : 0);
    grid[r][c].block = false;
    grid[r][c].sol = grid[r][c].sol ?? A[i];
  }
}

let nextNum = 1;
const acrossSeq = WORDS.filter(w=>w.dir==='across');
const downSeq   = WORDS.filter(w=>w.dir==='down');
for(const w of acrossSeq){ w.num = nextNum++; }
for(const w of downSeq){   w.num = nextNum++; }
for(const w of WORDS){ grid[w.row][w.col].num = w.num; }

const inputs = [];
for(let r=0;r<ROWS;r++){
  for(let c=0;c<COLS;c++){
    const cell = grid[r][c];
    const d = document.createElement('div');
    if(cell.block){ d.className='cell block'; gridEl.appendChild(d); continue; }
    d.className='cell';
    if(cell.num){ const s=document.createElement('span'); s.className='num'; s.textContent=cell.num; d.appendChild(s); }
    const i = document.createElement('input');
    i.setAttribute('maxlength','1'); i.setAttribute('inputmode','text');
    i.setAttribute('autocomplete','off'); i.setAttribute('autocapitalize','characters'); i.setAttribute('autocorrect','off');
    i.dataset.sol = cell.sol;
    i.addEventListener('input', e=>{
      e.target.value = e.target.value.toUpperCase().replace(/[^A-Z]/g,'');
    });
    d.appendChild(i); gridEl.appendChild(d); inputs.push(i);
  }
}

function fillClueList(el, words){
  el.innerHTML = '';
  for(const w of words){
    const li = document.createElement('li');
    li.innerHTML = `<strong>${w.num}</strong>. ${w.clue} (${w.answer.length})`;
    el.appendChild(li);
  }
}
fillClueList(document.getElementById('acrossList'), acrossSeq);
fillClueList(document.getElementById('downList'),   downSeq);

function norm(x){return (x||'').toUpperCase();}
function isCorrect(i){ return norm(i.value) === norm(i.dataset.sol); }

document.getElementById('check').addEventListener('click', ()=>{
  let ok = true, allFilled = true;
  inputs.forEach(i=>{
    const filled = !!i.value;
    if(!filled) allFilled = false;
    const good = filled && isCorrect(i);
    i.classList.toggle('ok', good);
    i.classList.toggle('bad', filled && !good);
    if(!good) ok = false;
  });
  if(ok && allFilled) window.location.href = BOUQUET_URL;
  else (inputs.find(i=>!i.value) || inputs.find(i=>!isCorrect(i)) || inputs[0]).focus();
});

document.getElementById('clear').addEventListener('click', ()=>{
  inputs.forEach(i=>{ i.value=''; i.classList.remove('ok','bad'); });
  inputs[0]?.focus();
});

document.getElementById('startGame').addEventListener('click', ()=>{
  document.getElementById('intro').style.display='none';
  document.getElementById('game').style.display='grid';
  inputs[0]?.focus();
});

// ----- Developer shortcuts -----
// Shift+Q (desktop)
document.addEventListener('keydown', function(e) {
  if (e.key && e.key.toLowerCase() === 'q' && e.shiftKey) {
    window.location.href = BOUQUET_URL;
  }
});
// 'q' x3 quickly (phone)
(function(){
  let queue = [];
  const WINDOW_MS = 1500;
  function maybeSkip() {
    const now = Date.now();
    queue = queue.filter(t => now - t < WINDOW_MS);
    if (queue.length >= 3) window.location.href = BOUQUET_URL;
  }
  document.addEventListener('keydown', function(e){
    if (e.key && e.key.toLowerCase() === 'q') {
      queue.push(Date.now());
      maybeSkip();
    }
  });
})();
</script>
</body>
</html>
